@model TestDirecTV.Models.SlotsViewModel
@{
    ViewBag.Title = "Index3";
}

<div class="container-fluid intoTheForest">
    <center><input type="image" img src="~/Images/ATT Dan Created.gif" /></center>
    
    <div class="row">
        <div class="clearBackground">       
            <div class="col-sm-10">
                <h1 style="color:orangered; font-family:verdana; font-size:300%; text-align:right;">Second Question</h1>
            </div>

        </div>
        
    </div>
   <br />
    <div class="row">
        <div class="clearBackground">
            <div class="col-sm-4">

            </div>
            <div class="col-sm-4">

            </div>
            <div class="col-sm-4">
                <div style="text-align:left; font-family:Verdana; color:coral; font-size:200%;"  id="questionContainer">
                    <div id="question">
                    </div>
                    <br />
                    <div id="answerContainer">
                    </div>
                </div>
            </div>

        </div>
    </div>
         <br />
    <br />
    <br />
    @*<div class="row">
        <div style="text-align:center; font-family:Verdana;" class="col-sm-12" id="questionContainer">
            <div id="question">
            </div>
            <br />
            <div id="answerContainer">
            </div>
        </div>

    </div>*@
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
</div>

<script type="text/template" id="template">
    
        <button type="button" class="answer" id=""></button>
    
</script>

<script>
    var userId = @Model.UserId;
    var questionSet = @Model.QuestionSet;
    var questions = [
        {
            question: "The most recent Bourne film was NOT filmed in which country?",
            answers: ["Spain", "Greece", "England", "Portugal"],
            correct: 3
        },
        {
            question: "How many points are awarded in an NFL touchback?",
            answers: ["2", "3", "6", "7"],
            correct: 0
        },
        {
            question: "California has the ___th largest global economy?",
            answers: ["4", "6", "8", "10"],
            correct: 1
        },
        {
            question: "What actor-actress holds the most Oscar wins?",
            answers: ["Katharine Hepburn", "Meryl Streep", "Jack Nicholson", "Daniel Day-Lewis"],
            correct: 0
        }
    ]

    var pageQuestion = questions[questionSet - 1] // -1 turns questionSet number into index of questions array
    $(document).ready(function() {
        console.log(pageQuestion);
        loadQuestion(pageQuestion);
        $(".answer").on("click", doThings);
    })

    var loadQuestion = function(questionObject) {
        $("#question").text(questionObject.question)
        for (var i = 0; i < questionObject.answers.length; i++) {
            var currentAnswer = questionObject.answers[i];
            var $temp = $($("#template").html());
            $temp.text(currentAnswer);
            if (questionObject.correct == i) {
                $temp.addClass("correct")
            }
            $("#answerContainer").append($temp)
        }

    }

    var doThings = function() {
        var result = $(this).hasClass("correct")
        if (result == true){
            put();
        }

        console.log("result", result)
        setTimeout(function(){ window.location.href = "/home/Q3/" + userId + "/" + questionSet }, 5000)
    }


    var put = function(){
        var url = "/api/scoreboard/score";
        var settings = {
            cache: false
            , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
            , data: "Id=" + userId
            , dataType: "json"
            , success: function (data) {
                console.log("Put success")
            }
            , error: function (data) {
                console.log("Put error")
            }
            , type: "PUT"
        };
        $.ajax(url, settings);
    }
</script>