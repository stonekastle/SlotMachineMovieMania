

<div class="container-fluid theException">
    <div class="row">
        <div class="clearBackground">
            <div class="col-sm-4">
                <h1 style="color:beige; font-family:verdana; font-size:500%; text-align:right;">Film Challenge</h1>
            </div>
        </div>
    </div>

    <div class="clearBackground">
        <div class="row">
            <div class="col-sm-6">
                <h1 style="color:moccasin; font-family:verdana; text-align:right">Get ready to smile for the camera</h1>
            </div>
        </div>
    </div>

    <div class="clearBackground">
        <div class="row">
            <div class="col-sm-4">
                <h3 style="color:firebrick; font-family:verdana; text-align:center">Your results will be sent to our scoreboard</h3>
            </div>
        </div>
    </div>


    <div class="clearBackground">
        <div class="row">
            <div class="col-sm-6">
                <center><img src="~/Images/TheException-webcamPhoto.png" /></center>
            </div>
        </div>
    </div>

    <video id="video" width="640" height="480" autoplay></video>
    <button id="snap">Snap Photo</button>
    <canvas id="canvas" width="640" height="480"></canvas>

    @*------------This section is left in because all the back-end wiring are connected to these two inputs, firstName and lastName-----------------------*@
    <div class="clearBackground">
        <div class="row">
            <div class="col-sm-6">
                <form class="form-horizontal" id="scoreboardForm" style="text-align:center">
                    <h1 style="color:moccasin; font-family:verdana; " text-align:center">Please include your name</h1>
                    
                    <br>
                    <div class="form-group">
                        <div class="col-sm-2 col-sm-offset-5"><input type="text" id="imageURL" name="imageURL" placeholder="Diego" class="form-control" /></div>
                    </div>
                    <div class="form-group">
                        <div class="col-sm-2 col-sm-offset-5">
                            <button type="button" class="btn-btn-primary" name="Start" id="submit">Start</button>
                        </div>
                    </div>
                </form>
            </div>
        </div>
    </div>
    @*----------------------------------------------------------------------------------------------------------------------------------------------------*@
    <div class="clearBackground">
        <div class="row">
        <div class="col-sm-6">
            <center><input type="image" img src="~/Images/ATT Dan Created.gif" /></center>
            </div>
        </div>
    </div>
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />

    <br />
</div>


@section Scripts {
    <script type="text/javascript">

        // Grab elements, create settings, etc.
        var video = document.getElementById('video');
        // Elements for taking the snapshot
        var canvas = document.getElementById('canvas');
        var context = canvas.getContext('2d');
        var video = document.getElementById('video');

        // Trigger photo take
        document.getElementById("snap").addEventListener("click", function () {
            context.drawImage(video, 0, 0, 640, 480);
        });

        // Get access to the camera!
        if (navigator.mediaDevices && navigator.mediaDevices.getUserMedia) {
            // Not adding `{ audio: true }` since we only want video now
            navigator.mediaDevices.getUserMedia({ video: true }).then(function (stream) {
                video.src = window.URL.createObjectURL(stream);
                video.play();
            });
        }

        $(document).ready(function () {
            console.log("All systems are clear, Launch Control")
            $('#submit').on('click', scoreboardFormSubmit);
        });

        var scoreboardFormSubmit = function () {
            console.log("fired to scoreboard!")
            var myData = "imageURL=" + $("#imageURL").val();
            console.log(myData)
            insert(myData);
        }

        var insert = function (data) {
            var url = "/api/scoreboard/";
            var settings = {
                cache: false
                , contentType: "application/x-www-form-urlencoded; charset=UTF-8"
                , data: data
                , dataType: "json"
                , success: function (response) {
                    console.log("post success");
                }
                , error: function (response) {
                    console.log("post error");
                }
                , type: "POST"
            }
            $.ajax(url, settings);

            //Code to tell user to go to next page
            $(".clearBackground").remove();

            setTimeout(function () { window.location.href = "/home/newuser/" }, 10000)
        }
    </script>
}