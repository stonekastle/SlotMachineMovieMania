@model TestDirecTV.Models.SlotsViewModel
@{
    ViewBag.Title = "Index3";
}

<div id="questionContainer">
    <div id="question">
    </div>
    <div id="answerContainer">

    </div>
</div>

<script type="text/template" id="template">
    <button type="button" class="answer" id=""></button>
</script>

<script>
    var userId = @Model.UserId;
    var questionSet = @Model.QuestionSet;
    var questions = [
        {
            question: "Star of Bourne?",
            answers: ["Matt Damon", "Morgan Freeman", "Christian Bale", "Hugh Jackman"],
            correct: 0
        },
        {
            question: "Touchdown points??",
            answers: ["1", "3", "6", "7"],
            correct: 2
        },
        {
            question: "How many answer choices?",
            answers: ["1", "2", "3", "4"],
            correct: 3
        },
        {
            question: "First day of work week?",
            answers: ["Monday", "Tuesday", "Friday", "Sunday"],
            correct: 0
        }
    ]

    var pageQuestion = questions[questionSet - 1] // -1 turns questionSet number into index of questions array
    $(document).ready(function() {
        console.log(pageQuestion);
        loadQuestion(pageQuestion);
        $(".answer").on("click", doThings);
    })

    var loadQuestion = function(questionObject) {
        $("#question").text(questionObject.question)
        for (var i = 0; i < questionObject.answers.length; i++) {
            var currentAnswer = questionObject.answers[i];
            var $temp = $($("#template").html());
            $temp.text(currentAnswer);
            if (questionObject.correct == i) {
                $temp.addClass("correct")
            }
            $("#answerContainer").append($temp)
        }

    }

    var doThings = function() {
        var result = $(this).hasClass("correct");
        console.log("result", result)
        setTimeout(function(){ window.location.href = "/home/Q3/" + userId + "/" + questionSet }, 10000)
    }

</script>